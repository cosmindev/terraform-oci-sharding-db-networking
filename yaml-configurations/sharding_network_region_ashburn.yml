# ####################################################################################################### #
# Copyright (c) 2023 Oracle and/or its affiliates,  All rights reserved.                                  #
# Licensed under the Universal Permissive License v 1.0 as shown at https: //oss.oracle.com/licenses/upl. #
# Author: Cosmin Tudor                                                                                    #
# Author email: cosmin.tudor@oracle.com                                                                   #
# Last Modified: Mon Dec 11 2023                                                                          #
# Modified by: Cosmin Tudor, email: cosmin.tudor@oracle.com                                               #
# ####################################################################################################### #

---
network_configuration:
  default_compartment_key: CMP-SHARDING-NETWORK-KEY
  default_enable_cis_checks: false
  default_freeform_tags:
    customer-environment: sharding-environment
  network_configuration_categories:
    SHARDING-NETWORKING:
      category_freeform_tags:
        sharding-sub-environment: sharding-networking
      non_vcn_specific_gateways:
        dynamic_routing_gateways:
          DRG-A-SHARDING-KEY:
            display_name: drg-a-sharding
            drg_attachments:
              DRG-A-SHARDING-VCN-A-ATTACH-KEY:
                display_name: drg-a-sharding-vcn-a-attach
                drg_route_table_key: DRG-RT-VCN-A-TO-VCN-B-KEY
                network_details:
                  attached_resource_key: VCN-A-KEY
                  type: VCN
            remote_peering_connections:
              RPC-VCN-A-VCN-B-KEY:
                display_name: rpc-vcn-a-vcn-b
            drg_route_tables:
              DRG-RT-VCN-A-TO-VCN-B-KEY:
                display_name: drg-rt-vcna-to-vcnb
                is_ecmp_enabled: false
                route_rules:
                  ALL-TRAFFIC-TO-VCN-B-TO-RPC-KEY:
                    destination: 10.0.4.0/22
                    destination_type: CIDR_BLOCK
                    next_hop_drg_attachment_key: RPC-VCN-A-VCN-B-KEY
      vcns:
        VCN-A-KEY:
          block_nat_traffic: false
          cidr_blocks:
          - 10.0.0.0/22
          default-security-list:
            egress_rules:
            - description: egress to 0.0.0.0/0 over ALL protocols
              dst: 0.0.0.0/0
              dst_type: CIDR_BLOCK
              protocol: ALL
              stateless: false
            ingress_rules:
            - description: ingress from 0.0.0.0/0 over TCP22
              dst_port_max: 22
              dst_port_min: 22
              protocol: TCP
              src: 0.0.0.0/0
              src_type: CIDR_BLOCK
              stateless: false
            - description: ingress from 0.0.0.0/0 over TCP443
              dst_port_max: 443
              dst_port_min: 443
              protocol: TCP
              src: 0.0.0.0/0
              src_type: CIDR_BLOCK
              stateless: false
          display_name: VCN-A
          dns_label: vcna
          is_attach_drg: false
          is_create_igw: false
          is_ipv6enabled: false
          is_oracle_gua_allocation_enabled: false
          route_tables:
            VCN-A-RT-KEY:
              display_name: vcn-a-rt
              route_rules:
                TO-IGW-KEY:
                  description: Default route table to IGW
                  destination: 0.0.0.0/0
                  destination_type: CIDR_BLOCK
                  network_entity_key: IGW-ASH-KEY
                TO-VCN-B-KEY:
                  description: Route for accessing VCN-B in Frankfurt through the
                    DRG RPC
                  destination: 10.0.4.0/22
                  destination_type: CIDR_BLOCK
                  network_entity_key: DRG-A-SHARDING-KEY
          subnets:
            SUBNET-A-KEY:
              cidr_block: 10.0.0.0/24
              dhcp_options_key: default_dhcp_options
              display_name: subneta-vcn-a
              dns_label: subnetavcna
              ipv6cidr_blocks: []
              prohibit_internet_ingress: true
              prohibit_public_ip_on_vnic: true
              route_table_key: VCN-A-RT-KEY
              security_list_keys:
              - default_security_list
          vcn_specific_gateways:
            internet_gateways:
              IGW-ASH-KEY:
                display_name: igw-ash
                enabled: true
